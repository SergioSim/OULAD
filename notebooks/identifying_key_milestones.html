

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Identifying key milestones &#8212; Analysis of the OULAD dataset</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/identifying_key_milestones';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Predicting student’s final exam outcome" href="predicting_students_final_exam_outcome.html" />
    <link rel="prev" title="A first descriptive analysis" href="first_descriptive_analysis.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    <p class="title logo__title">Analysis of the OULAD dataset</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Welcome
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="tables.html">Tables of the OULAD dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="first_descriptive_analysis.html">A first descriptive analysis</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Identifying key milestones</a></li>
<li class="toctree-l1"><a class="reference internal" href="predicting_students_final_exam_outcome.html">Predicting student’s final exam outcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="optimize_mooc_learner_pathways.html">Optimize MOOC learner pathways</a></li>
<li class="toctree-l1"><a class="reference internal" href="time_series_classification_for_dropout_prediction.html">Time series classification for dropout prediction</a></li>
<li class="toctree-l1"><a class="reference internal" href="withdrawal_prediction_on_behavioral_indicators.html">Withdrawal prediction on behavioral indicators</a></li>
<li class="toctree-l1"><a class="reference internal" href="detecting_at_risk_students.html">Detecting at-risk students</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/SergioSim/OULAD" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/SergioSim/OULAD/issues/new?title=Issue%20on%20page%20%2Fnotebooks/identifying_key_milestones.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/notebooks/identifying_key_milestones.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Identifying key milestones</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cumulative-weighted-assessments-scores">Cumulative weighted assessments scores</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-model-the-metric-as-a-time-series-for-each-student">Step 1: Model the metric as a time series for each student</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-perform-statistical-tests">Step 2: Perform statistical tests</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#unpaired-t-test">Unpaired t-test</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#assumptions">Assumptions</a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#detecting-outliers-visually"><strong>Detecting outliers visually</strong></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#detecting-extreme-outliers-statistically"><strong>Detecting extreme outliers statistically</strong></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#examine-normality-visually"><strong>Examine normality visually</strong></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#examine-normality-with-the-shapiro-wilk-test"><strong>Examine normality with the Shapiro-Wilk test</strong></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#verifying-equal-variances-with-the-levene-test"><strong>Verifying equal variances with the Levene test</strong></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion"><strong>Conclusion</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wilcoxon-rank-sum-test">Wilcoxon rank-sum test</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Assumptions</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#applying-the-test">Applying the test</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-compute-the-splitting-value">Step 3: Compute the splitting value</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-4-plot-the-time-series-graph">Step 4: Plot the time-series graph</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cumulative-number-of-clicks">Cumulative number of clicks</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">Step 1: Model the metric as a time series for each student</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">Step 2: Perform statistical tests</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">Unpaired t-test</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">Assumptions</a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#id14"><strong>Detecting extreme outliers statistically</strong></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#examine-normality"><strong>Examine normality</strong></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#id15"><strong>Verifying equal variances with the Levene test</strong></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#id16"><strong>Conclusion</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">Wilcoxon rank-sum test</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">Assumptions</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">Applying the test</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">Step 3: Compute the splitting value</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">Step 4: Plot the time-series graph</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="identifying-key-milestones">
<h1>Identifying key milestones<a class="headerlink" href="#identifying-key-milestones" title="Permalink to this heading">#</a></h1>
<p>This section aims to reproduce the <code class="docutils literal notranslate"><span class="pre">key</span> <span class="pre">splitting</span> <span class="pre">milestone</span> <span class="pre">identification</span></code> approach
presented in the work of Hlosta et al. <span id="id1">[<a class="reference internal" href="#id7" title="Martin Hlosta, Jakub Kocvara, Zdenek Zdráhal, and David Beran. Visualisation of key splitting milestones to better support interventions. In 03 2019.">HKZB19</a>]</span></p>
<p><strong>Keywords</strong>: Identifying at-risk students</p>
<p>The approach of Hlosta et al. aims to detect points in time where the paths of
successful and unsuccessful students start to split.</p>
<p><strong>Procedure:</strong></p>
<ol class="arabic simple">
<li><p>Define key performance metrics for students
(e.g., number of clicks, assessment scores) and model them as a time series for
each student. (e.g., the
<span class="xref myst">cumulative number of clicks</span>,
cumulative assessment scores,
<span class="xref myst">cumulative weighted assessments scores</span>)</p></li>
<li><p>Perform statistical tests (e.g., Unpaired t-test, Wilcoxon Rank Sum Test) in each
time slice between different groups of students.
(e.g., failing student group, succeeding student group)</p></li>
<li><p>Compute the splitting value in each time slice that minimizes the split error.
(i.e., that maximizes prediction accuracy)</p></li>
<li><p>Plot the time-series graph showing at which time slice the first statistically
significant difference was detected and the split values.</p></li>
</ol>
<div class="docutils container" id="id2">
<dl class="citation">
<dt class="label" id="id7"><span class="brackets"><a class="fn-backref" href="#id1">HKZB19</a></span></dt>
<dd><p>Martin Hlosta, Jakub Kocvara, Zdenek Zdráhal, and David Beran. Visualisation of key splitting milestones to better support interventions. In 03 2019.</p>
</dd>
</dl>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">combinations</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">levene</span><span class="p">,</span> <span class="n">norm</span><span class="p">,</span> <span class="n">probplot</span><span class="p">,</span> <span class="n">ranksums</span><span class="p">,</span> <span class="n">shapiro</span>

<span class="kn">from</span> <span class="nn">oulad</span> <span class="kn">import</span> <span class="n">get_oulad</span>

<span class="o">%</span><span class="k">load_ext</span> oulad.capture
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%capture</span> oulad
<span class="n">oulad</span> <span class="o">=</span> <span class="n">get_oulad</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<section id="cumulative-weighted-assessments-scores">
<h2>Cumulative weighted assessments scores<a class="headerlink" href="#cumulative-weighted-assessments-scores" title="Permalink to this heading">#</a></h2>
<p>We use the weighted assessment score for the key performance metric, in this example.</p>
<section id="step-1-model-the-metric-as-a-time-series-for-each-student">
<h3>Step 1: Model the metric as a time series for each student<a class="headerlink" href="#step-1-model-the-metric-as-a-time-series-for-each-student" title="Permalink to this heading">#</a></h3>
<p>As in the work of Hlosta et al. we will use the <code class="docutils literal notranslate"><span class="pre">EEE/2014J</span></code> course.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>During merging, we loose 253 students that didn’t submit any assessments.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cumulative_weighted_assessment_score</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">oulad</span><span class="o">.</span><span class="n">student_registration</span><span class="p">[</span>
        <span class="p">(</span><span class="n">oulad</span><span class="o">.</span><span class="n">student_registration</span><span class="o">.</span><span class="n">code_module</span> <span class="o">==</span> <span class="s2">&quot;EEE&quot;</span><span class="p">)</span>
        <span class="o">&amp;</span> <span class="p">(</span><span class="n">oulad</span><span class="o">.</span><span class="n">student_registration</span><span class="o">.</span><span class="n">code_presentation</span> <span class="o">==</span> <span class="s2">&quot;2014J&quot;</span><span class="p">)</span>
    <span class="p">][[</span><span class="s2">&quot;id_student&quot;</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">merge</span><span class="p">(</span>
        <span class="n">oulad</span><span class="o">.</span><span class="n">student_assessment</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s2">&quot;date_submitted&quot;</span><span class="p">,</span> <span class="s2">&quot;is_banked&quot;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">,</span>
        <span class="n">on</span><span class="o">=</span><span class="s2">&quot;id_student&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">merge</span><span class="p">(</span>
        <span class="n">oulad</span><span class="o">.</span><span class="n">assessments</span><span class="p">[</span>
            <span class="p">(</span><span class="n">oulad</span><span class="o">.</span><span class="n">assessments</span><span class="o">.</span><span class="n">code_module</span> <span class="o">==</span> <span class="s2">&quot;EEE&quot;</span><span class="p">)</span>
            <span class="o">&amp;</span> <span class="p">(</span><span class="n">oulad</span><span class="o">.</span><span class="n">assessments</span><span class="o">.</span><span class="n">code_presentation</span> <span class="o">==</span> <span class="s2">&quot;2014J&quot;</span><span class="p">)</span>
        <span class="p">],</span>
        <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">,</span>
        <span class="n">on</span><span class="o">=</span><span class="s2">&quot;id_assessment&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">weighted_score</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;weight&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)[</span>
        <span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="s2">&quot;id_student&quot;</span><span class="p">,</span> <span class="s2">&quot;weighted_score&quot;</span><span class="p">]</span>
    <span class="p">]</span>
    <span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;id_student&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">&quot;weighted_score&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
    <span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="n">oulad</span><span class="o">.</span><span class="n">student_info</span><span class="p">[</span>
            <span class="p">(</span><span class="n">oulad</span><span class="o">.</span><span class="n">student_info</span><span class="o">.</span><span class="n">code_module</span> <span class="o">==</span> <span class="s2">&quot;EEE&quot;</span><span class="p">)</span>
            <span class="o">&amp;</span> <span class="p">(</span><span class="n">oulad</span><span class="o">.</span><span class="n">student_info</span><span class="o">.</span><span class="n">code_presentation</span> <span class="o">==</span> <span class="s2">&quot;2014J&quot;</span><span class="p">)</span>
        <span class="p">][[</span><span class="s2">&quot;id_student&quot;</span><span class="p">,</span> <span class="s2">&quot;final_result&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;id_student&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;final_result&quot;</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">unstacked_cumulative_weighted_assessment_score</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">cumulative_weighted_assessment_score</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span>
<span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">cumulative_weighted_assessment_score</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>33.0</th>
      <th>68.0</th>
      <th>131.0</th>
      <th>166.0</th>
    </tr>
    <tr>
      <th>id_student</th>
      <th>final_result</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>47061</th>
      <th>Pass</th>
      <td>11.68</td>
      <td>37.16</td>
      <td>53.96</td>
      <td>70.20</td>
    </tr>
    <tr>
      <th>60809</th>
      <th>Pass</th>
      <td>14.56</td>
      <td>36.40</td>
      <td>60.48</td>
      <td>86.80</td>
    </tr>
    <tr>
      <th>62034</th>
      <th>Pass</th>
      <td>14.56</td>
      <td>38.08</td>
      <td>55.72</td>
      <td>55.72</td>
    </tr>
    <tr>
      <th>67539</th>
      <th>Pass</th>
      <td>12.00</td>
      <td>33.84</td>
      <td>48.40</td>
      <td>64.92</td>
    </tr>
    <tr>
      <th>67685</th>
      <th>Pass</th>
      <td>12.00</td>
      <td>35.52</td>
      <td>57.36</td>
      <td>81.72</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2654928</th>
      <th>Pass</th>
      <td>14.56</td>
      <td>38.36</td>
      <td>61.60</td>
      <td>83.72</td>
    </tr>
    <tr>
      <th>2663195</th>
      <th>Pass</th>
      <td>14.56</td>
      <td>38.36</td>
      <td>61.88</td>
      <td>84.00</td>
    </tr>
    <tr>
      <th>2681277</th>
      <th>Withdrawn</th>
      <td>15.20</td>
      <td>15.20</td>
      <td>15.20</td>
      <td>15.20</td>
    </tr>
    <tr>
      <th>2686053</th>
      <th>Distinction</th>
      <td>13.76</td>
      <td>38.12</td>
      <td>63.04</td>
      <td>87.12</td>
    </tr>
    <tr>
      <th>2686712</th>
      <th>Fail</th>
      <td>16.00</td>
      <td>42.32</td>
      <td>42.32</td>
      <td>42.32</td>
    </tr>
  </tbody>
</table>
<p>935 rows × 4 columns</p>
</div></div></div>
</div>
</section>
<section id="step-2-perform-statistical-tests">
<h3>Step 2: Perform statistical tests<a class="headerlink" href="#step-2-perform-statistical-tests" title="Permalink to this heading">#</a></h3>
<p>Let’s first check whether we can use the Unpaired t-test.</p>
<section id="unpaired-t-test">
<h4>Unpaired t-test<a class="headerlink" href="#unpaired-t-test" title="Permalink to this heading">#</a></h4>
<section id="assumptions">
<h5>Assumptions<a class="headerlink" href="#assumptions" title="Permalink to this heading">#</a></h5>
<div class="admonition-spoilers admonition">
<p class="admonition-title">Spoilers</p>
<p>Assumptions fail for the t-test. We can skip to the <span class="xref myst">Wilcoxon rank-sum test</span>.</p>
</div>
<ol class="arabic simple">
<li><p><strong>Independence of the observations</strong></p>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" checked="checked" disabled="disabled" type="checkbox"> Each student belongs to only one group (Distinction, Pass, Fail, Withdrawn).</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" checked="checked" disabled="disabled" type="checkbox"> There is no relationship between students in each group. (We assume that the
<code class="docutils literal notranslate"><span class="pre">final_result</span></code> of a student does not depend on the <code class="docutils literal notranslate"><span class="pre">final_result</span></code> of other
students)</p></li>
</ul>
</li>
<li><p><strong>Absence of outliers</strong> (see <span class="xref myst">box plot</span> and <span class="xref myst">outlier
count</span> below)</p></li>
<li><p><strong>Normality</strong> (each group should be normally distributed, see <span class="xref myst">Shapiro-Wilk test</span> below)</p></li>
<li><p><strong>Homoscedasticity</strong> (homogeneity of variances - the variance within the groups
should be similar, see
<span class="xref myst">Levene test</span> below)</p></li>
</ol>
<section id="detecting-outliers-visually">
<h6><strong>Detecting outliers visually</strong><a class="headerlink" href="#detecting-outliers-visually" title="Permalink to this heading">#</a></h6>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cumulative_weighted_assessment_score</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;final_result&quot;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/9dc97a324d6c6d4e11be61ebdc35ca6648b216429e274d65a1870d2862e46e58.png" src="../_images/9dc97a324d6c6d4e11be61ebdc35ca6648b216429e274d65a1870d2862e46e58.png" />
</div>
</div>
<p>We can see quite a few outliers, notably in the <code class="docutils literal notranslate"><span class="pre">Pass</span></code> student group.</p>
</section>
<section id="detecting-extreme-outliers-statistically">
<h6><strong>Detecting extreme outliers statistically</strong><a class="headerlink" href="#detecting-extreme-outliers-statistically" title="Permalink to this heading">#</a></h6>
<p>Let’s verify whether there are any extreme outliers (above <code class="docutils literal notranslate"><span class="pre">Q3</span> <span class="pre">+</span> <span class="pre">3xIQR</span></code> or below
<code class="docutils literal notranslate"><span class="pre">Q1</span> <span class="pre">-</span> <span class="pre">3xIQR</span></code>).</p>
<p>A quick reminder:</p>
<ul class="simple">
<li><p><strong>Q1</strong> is the first quantile = the value that is greater than 25% of the data</p></li>
<li><p><strong>Q3</strong> is the third quantile = the value that is greater than 75% of the data</p></li>
<li><p><strong>IQR</strong> is the <strong>Interquartile Range</strong> = Q3 - Q1</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">extremes</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">unstacked_cumulative_weighted_assessment_score</span><span class="o">.</span><span class="n">quantile</span><span class="p">([</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">])</span>
    <span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">IQR</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mf">0.75</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="mf">0.25</span><span class="p">])</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span>
        <span class="n">lower_extreme</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mf">0.25</span><span class="p">]</span> <span class="o">-</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;IQR&quot;</span><span class="p">],</span>
        <span class="n">upper_extreme</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mf">0.75</span><span class="p">]</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;IQR&quot;</span><span class="p">],</span>
    <span class="p">)[[</span><span class="s2">&quot;lower_extreme&quot;</span><span class="p">,</span> <span class="s2">&quot;upper_extreme&quot;</span><span class="p">]]</span>
<span class="p">)</span>

<span class="n">bigger</span> <span class="o">=</span> <span class="n">unstacked_cumulative_weighted_assessment_score</span> <span class="o">&gt;</span> <span class="n">extremes</span><span class="o">.</span><span class="n">upper_extreme</span>
<span class="n">smaller</span> <span class="o">=</span> <span class="n">unstacked_cumulative_weighted_assessment_score</span> <span class="o">&lt;</span> <span class="n">extremes</span><span class="o">.</span><span class="n">lower_extreme</span>
<span class="n">total</span> <span class="o">=</span> <span class="n">bigger</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">+</span> <span class="n">smaller</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;The number of extreme outliers (N=</span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s2">) represents &quot;</span>
    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="mi">100</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">cumulative_weighted_assessment_score</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="sa">f</span><span class="s2">&quot;% of the dataset (N=</span><span class="si">{</span><span class="n">cumulative_weighted_assessment_score</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="si">}</span><span class="s2">)&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The number of extreme outliers (N=21) represents 0.56% of the dataset (N=3740)
</pre></div>
</div>
</div>
</div>
<p>We suspect that the number of outliers might bias the test.
However, as their proportion is relatively small (0.56%) and the dataset is quite
large (3740), we assume that the impact of the bias will be limited.</p>
</section>
<section id="examine-normality-visually">
<h6><strong>Examine normality visually</strong><a class="headerlink" href="#examine-normality-visually" title="Permalink to this heading">#</a></h6>
<p>Let’s plot a histogram to inspect the distribution visually.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">arr</span> <span class="ow">in</span> <span class="n">cumulative_weighted_assessment_score</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">)):</span>
    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="n">cumulative_weighted_assessment_score</span><span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">get_text</span><span class="p">())]</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
        <span class="n">scores</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;kde&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">scores</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">])</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">*</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">(),</span> <span class="mi">100</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">norm</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span>
            <span class="n">x</span><span class="p">,</span> <span class="o">**</span><span class="n">scores</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">])</span><span class="o">.</span><span class="n">set_axis</span><span class="p">([</span><span class="s2">&quot;loc&quot;</span><span class="p">,</span> <span class="s2">&quot;scale&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/fb47907b21c2f7d5748d64086b0fed3a748a338677d4623c0580c5e5e0c80e3b.png" src="../_images/fb47907b21c2f7d5748d64086b0fed3a748a338677d4623c0580c5e5e0c80e3b.png" />
</div>
</div>
<p>We notice that the shape of the distribution (blue histogram / red density) is quite
different from the normal bell curve (in green).</p>
<p>Another option might be to plot probability plots that show how much our
distributions follow the normal distribution.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">constrained_layout</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">probplot</span><span class="p">(</span><span class="n">cumulative_weighted_assessment_score</span><span class="p">[</span><span class="mf">33.0</span><span class="p">],</span> <span class="n">dist</span><span class="o">=</span><span class="s2">&quot;norm&quot;</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">probplot</span><span class="p">(</span><span class="n">cumulative_weighted_assessment_score</span><span class="p">[</span><span class="mf">68.0</span><span class="p">],</span> <span class="n">dist</span><span class="o">=</span><span class="s2">&quot;norm&quot;</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">probplot</span><span class="p">(</span><span class="n">cumulative_weighted_assessment_score</span><span class="p">[</span><span class="mf">131.0</span><span class="p">],</span> <span class="n">dist</span><span class="o">=</span><span class="s2">&quot;norm&quot;</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">probplot</span><span class="p">(</span><span class="n">cumulative_weighted_assessment_score</span><span class="p">[</span><span class="mf">166.0</span><span class="p">],</span> <span class="n">dist</span><span class="o">=</span><span class="s2">&quot;norm&quot;</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/da0c93431199f679aef9162b2a8264d4ed392ad0c68049084b6e0b8d2b5c24f7.png" src="../_images/da0c93431199f679aef9162b2a8264d4ed392ad0c68049084b6e0b8d2b5c24f7.png" />
</div>
</div>
<p>Here too, we notice that the distribution deviates from the theoretical quantiles
and thus seems to be not normal.</p>
</section>
<section id="examine-normality-with-the-shapiro-wilk-test">
<h6><strong>Examine normality with the Shapiro-Wilk test</strong><a class="headerlink" href="#examine-normality-with-the-shapiro-wilk-test" title="Permalink to this heading">#</a></h6>
<p>The Shapiro-Wilk normality test tests the null hypothesis H0=”the distribution is
normally distributed” against H1=”the distribution is <strong>not</strong> normally distributed”.</p>
<p>Thus, the null hypothesis is <strong>rejected</strong> if the p-value is <strong>less or equal</strong> to a
chosen alpha level which means that there is evidence that the tested data are <strong>not</strong>
normally distributed.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cumulative_weighted_assessment_score</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">shapiro</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">pvalue</span> <span class="o">&lt;=</span> <span class="mf">0.05</span>
<span class="p">)</span><span class="o">.</span><span class="n">rename_axis</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;H0 rejected&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>H0 rejected</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>33.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>1</th>
      <td>68.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2</th>
      <td>131.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>3</th>
      <td>166.0</td>
      <td>True</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The Shapiro-Wilk test indicates evidence that the distributions are
<strong>not</strong> normally distributed.</p>
<p>At this stage, we fail to satisfy the required assumptions for an
Unpaired t-test because the t-test requires normality to assure that the sample mean
is normal.</p>
<p>However, the dataset is large (3740), and thus the Central limit theorem applies,
which means that the sample mean will follow a normal distribution.</p>
<p>Thus, we assume that the normality requirement is satisfied in this case.</p>
</section>
<section id="verifying-equal-variances-with-the-levene-test">
<h6><strong>Verifying equal variances with the Levene test</strong><a class="headerlink" href="#verifying-equal-variances-with-the-levene-test" title="Permalink to this heading">#</a></h6>
<p>Finally, let’s test the homogeneity of variance using the Levene test.</p>
<p>The Levene test tests the null hypothesis H0=”groups have equal variances” against
H1=”the variances are different”.</p>
<p>Thus, if the p-value is <strong>less or equal</strong> to a chosen alpha level, the null
hypothesis is <strong>rejected</strong>, and there is evidence that the group variances are
<strong>different</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cumulative_weighted_assessment_score</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">levene</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">row</span><span class="p">)]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">values</span><span class="p">])</span><span class="o">.</span><span class="n">pvalue</span>
    <span class="o">&lt;=</span> <span class="mf">0.05</span>
<span class="p">)</span><span class="o">.</span><span class="n">rename_axis</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;H0 rejected&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>H0 rejected</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>33.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>1</th>
      <td>68.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2</th>
      <td>131.0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>3</th>
      <td>166.0</td>
      <td>True</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The Levene test indicates that there is evidence that the variances are <strong>different</strong>.</p>
</section>
<section id="conclusion">
<h6><strong>Conclusion</strong><a class="headerlink" href="#conclusion" title="Permalink to this heading">#</a></h6>
<p>We conclude that assumptions for an Unpaired t-test are not satisfied as the variances
are different.</p>
<p>Let’s use another test instead, which does not require the homogeneity of variance.</p>
</section>
</section>
</section>
<section id="wilcoxon-rank-sum-test">
<h4>Wilcoxon rank-sum test<a class="headerlink" href="#wilcoxon-rank-sum-test" title="Permalink to this heading">#</a></h4>
<p>The Wilcoxon rank-sum test tests the null-hypothesis H0=”the distributions are equal”
against H1=”values in one distribution are more likely to be larger than the values in
the other distribution”.</p>
<p>Thus, if the p-value is <strong>less or equal</strong> to a chosen alpha level, the null
hypothesis is <strong>rejected</strong>, and there is evidence that the distributions are
<strong>different</strong>.</p>
<section id="id9">
<h5>Assumptions<a class="headerlink" href="#id9" title="Permalink to this heading">#</a></h5>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" checked="checked" disabled="disabled" type="checkbox"> <strong>Independence of the observations</strong></p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" checked="checked" disabled="disabled" type="checkbox"> <strong>Values are at least ordinal</strong> (ordering/sorting them makes sense)</p></li>
</ul>
<p>The dataset satisfies the Wilcoxon rank-sum test assumptions.</p>
</section>
<section id="applying-the-test">
<h5>Applying the test<a class="headerlink" href="#applying-the-test" title="Permalink to this heading">#</a></h5>
<p>We apply the Wilcoxon rank-sum test for each combination of <code class="docutils literal notranslate"><span class="pre">final_result</span></code> (e.g.,
Pass-Fail, Pass-Withdrawn, etc.) and for each time-slice (<code class="docutils literal notranslate"><span class="pre">date</span></code>) (33, 68, etc.)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">significance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span>
    <span class="p">(</span>
        <span class="n">cumulative_weighted_assessment_score</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">unstacked_cumulative_weighted_assessment_score</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="p">),</span>
    <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">offset</span><span class="p">,</span> <span class="n">date</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cumulative_weighted_assessment_score</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">unstacked_cumulative_weighted_assessment_score</span><span class="p">[</span><span class="n">date</span><span class="p">]</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
    <span class="n">offset</span> <span class="o">*=</span> <span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">combinations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">)),</span> <span class="n">r</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">significance</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="n">offset</span><span class="p">]</span> <span class="o">=</span> <span class="n">significance</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">offset</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ranksums</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">i</span><span class="p">],</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">j</span><span class="p">],</span> <span class="n">nan_policy</span><span class="o">=</span><span class="s2">&quot;omit&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pvalue</span> <span class="o">&lt;=</span> <span class="mf">0.05</span>
        <span class="p">)</span>

<span class="n">significance_df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
        <span class="n">significance</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="n">unstacked_cumulative_weighted_assessment_score</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">levels</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">columns</span><span class="o">=</span><span class="n">unstacked_cumulative_weighted_assessment_score</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">rename_axis</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">rename_axis</span><span class="p">([</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;H0 rejected&quot;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">significance_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="4" halign="left">33.0</th>
      <th colspan="4" halign="left">68.0</th>
      <th colspan="4" halign="left">131.0</th>
      <th colspan="4" halign="left">166.0</th>
    </tr>
    <tr>
      <th>H0 rejected</th>
      <th>Distinction</th>
      <th>Fail</th>
      <th>Pass</th>
      <th>Withdrawn</th>
      <th>Distinction</th>
      <th>Fail</th>
      <th>Pass</th>
      <th>Withdrawn</th>
      <th>Distinction</th>
      <th>Fail</th>
      <th>Pass</th>
      <th>Withdrawn</th>
      <th>Distinction</th>
      <th>Fail</th>
      <th>Pass</th>
      <th>Withdrawn</th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Distinction</th>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
    </tr>
    <tr>
      <th>Fail</th>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
    </tr>
    <tr>
      <th>Pass</th>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
    </tr>
    <tr>
      <th>Withdrawn</th>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>As in the work of Hlosta et al. the hypothesis test indicates a
significant difference between the groups in the time slices, starting from the
first time slice (the assessment from day 33).</p>
<p>We also note that the test did not reject the null hypothesis for the (Withdrawn-Fail)
couple in the first time slice (33), indicating that there is <strong>not</strong> enough evidence
to conclude the distributions to be different.</p>
</section>
</section>
</section>
<section id="step-3-compute-the-splitting-value">
<h3>Step 3: Compute the splitting value<a class="headerlink" href="#step-3-compute-the-splitting-value" title="Permalink to this heading">#</a></h3>
<p>This step tries to compute the splitting value in each time slice that minimizes
the split error (i.e., maximizes the number of correct predictions).</p>
<p>We intend only to separate <strong>Pass</strong>ing students from <strong>Fail</strong>ing students.
Therefore we re-label students that had <strong>Withdrawn</strong> from the course as <strong>Fail</strong>ing
and re-label those that had succeeded exceptionally well (<strong>Distinction</strong>) as
<strong>Pass</strong>ing students.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>We are still working on this part! Our current implementation follows a
<strong>naive</strong> approach!</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">splitting_values</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">date</span> <span class="ow">in</span> <span class="n">cumulative_weighted_assessment_score</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">cumulative_weighted_assessment_score</span><span class="p">[</span><span class="n">date</span><span class="p">]</span>
    <span class="n">index</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
    <span class="n">index</span><span class="p">[</span><span class="n">index</span> <span class="o">==</span> <span class="s2">&quot;Distinction&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Pass&quot;</span>
    <span class="n">index</span><span class="p">[</span><span class="n">index</span> <span class="o">==</span> <span class="s2">&quot;Withdrawn&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Fail&quot;</span>

    <span class="n">unique_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
    <span class="n">max_score</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># pylint: disable=invalid-name</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">unique_values</span><span class="p">:</span>
        <span class="n">separator</span> <span class="o">=</span> <span class="n">df</span> <span class="o">&lt;</span> <span class="n">value</span>
        <span class="c1"># We suppose Fail score &lt; Pass score</span>
        <span class="n">score</span> <span class="o">=</span> <span class="p">(</span><span class="n">index</span><span class="p">[</span><span class="n">separator</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Fail&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="n">index</span><span class="p">[</span><span class="o">~</span><span class="n">separator</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Pass&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">score</span> <span class="o">&gt;</span> <span class="n">max_score</span><span class="p">:</span>
            <span class="n">max_score</span> <span class="o">=</span> <span class="n">score</span>
            <span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span>
                    <span class="n">max_score</span> <span class="o">/</span> <span class="n">cumulative_weighted_assessment_score</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">2</span>
                <span class="p">),</span>
                <span class="s2">&quot;separator&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">,</span>
            <span class="p">}</span>

    <span class="n">splitting_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

<span class="n">splitting_values</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">splitting_values</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">cumulative_weighted_assessment_score</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">splitting_values</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>score</th>
      <th>separator</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>33.0</th>
      <td>0.78</td>
      <td>11.04</td>
    </tr>
    <tr>
      <th>68.0</th>
      <td>0.83</td>
      <td>26.72</td>
    </tr>
    <tr>
      <th>131.0</th>
      <td>0.89</td>
      <td>42.48</td>
    </tr>
    <tr>
      <th>166.0</th>
      <td>0.91</td>
      <td>53.40</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We note that although we get results of similar quality, there are some differences.
For instance, in the work of Hlosta et al. the obtained splitting values were around
[<code class="docutils literal notranslate"><span class="pre">13</span></code>, <code class="docutils literal notranslate"><span class="pre">20</span></code>, <code class="docutils literal notranslate"><span class="pre">40</span></code>, and <code class="docutils literal notranslate"><span class="pre">55</span></code>]</p>
</section>
<section id="step-4-plot-the-time-series-graph">
<h3>Step 4: Plot the time-series graph<a class="headerlink" href="#step-4-plot-the-time-series-graph" title="Permalink to this heading">#</a></h3>
<p>Finally, let’s plot the results.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">splitting_values</span><span class="p">[</span><span class="s2">&quot;separator&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
    <span class="n">linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Cumulative assessment score by student final_result&quot;</span><span class="p">,</span>
    <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Day&quot;</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Cumulative assessment score&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">mean_and_quartiles</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">cumulative_weighted_assessment_score</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;final_result&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">(</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;first_quartile&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">25</span><span class="p">)),</span>
            <span class="p">(</span><span class="s2">&quot;third_quartile&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">75</span><span class="p">)),</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">reorder_levels</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="o">.</span><span class="n">unstack</span><span class="p">()</span>
<span class="p">)</span>


<span class="k">def</span> <span class="nf">fill_between_plot</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Plots a matplotlib `fill_between` plot in the given axis.&quot;&quot;&quot;</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">),</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;mean&quot;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">values</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">),</span> <span class="n">values</span><span class="o">.</span><span class="n">first_quartile</span><span class="p">,</span> <span class="n">values</span><span class="o">.</span><span class="n">third_quartile</span><span class="p">]</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>


<span class="n">fill_between_plot</span><span class="p">(</span><span class="s2">&quot;Distinction&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="n">mean_and_quartiles</span><span class="p">[</span><span class="s2">&quot;Distinction&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="n">fill_between_plot</span><span class="p">(</span><span class="s2">&quot;Pass&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="n">mean_and_quartiles</span><span class="p">[</span><span class="s2">&quot;Pass&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="n">fill_between_plot</span><span class="p">(</span><span class="s2">&quot;Fail&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">mean_and_quartiles</span><span class="p">[</span><span class="s2">&quot;Fail&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="n">fill_between_plot</span><span class="p">(</span><span class="s2">&quot;Withdrawn&quot;</span><span class="p">,</span> <span class="s2">&quot;orange&quot;</span><span class="p">,</span> <span class="n">mean_and_quartiles</span><span class="p">[</span><span class="s2">&quot;Withdrawn&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/f5a782b20089eca46e49a1ca9c95c293819750623b4f80c4c3d19fa026acbf2e.png" src="../_images/f5a782b20089eca46e49a1ca9c95c293819750623b4f80c4c3d19fa026acbf2e.png" />
</div>
</div>
<p>Here too, we get similar graphs.
We note from this visualization that a clear distinction can be made between
<code class="docutils literal notranslate"><span class="pre">Distinction/Pass</span></code> and <code class="docutils literal notranslate"><span class="pre">Fail/Withdrawn</span></code> students if only considering the 25 and
75 percentile.</p>
<p>However, it might seem surprising why the splitting line is positioned that low.</p>
<p>Let’s plot the same graph and replace the 25/75 percentiles with 0/100 (i.e., min/max)
percentiles.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">splitting_values</span><span class="p">[</span><span class="s2">&quot;separator&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
    <span class="n">linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Cumulative assessment score by student final_result&quot;</span><span class="p">,</span>
    <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Day&quot;</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Cumulative assessment score&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">mean_and_quartiles</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">cumulative_weighted_assessment_score</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;final_result&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">(</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;first_quartile&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
            <span class="p">(</span><span class="s2">&quot;third_quartile&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">100</span><span class="p">)),</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">reorder_levels</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="o">.</span><span class="n">unstack</span><span class="p">()</span>
<span class="p">)</span>

<span class="n">fill_between_plot</span><span class="p">(</span><span class="s2">&quot;Distinction&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="n">mean_and_quartiles</span><span class="p">[</span><span class="s2">&quot;Distinction&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="n">fill_between_plot</span><span class="p">(</span><span class="s2">&quot;Pass&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="n">mean_and_quartiles</span><span class="p">[</span><span class="s2">&quot;Pass&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="n">fill_between_plot</span><span class="p">(</span><span class="s2">&quot;Fail&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">mean_and_quartiles</span><span class="p">[</span><span class="s2">&quot;Fail&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="n">fill_between_plot</span><span class="p">(</span><span class="s2">&quot;Withdrawn&quot;</span><span class="p">,</span> <span class="s2">&quot;orange&quot;</span><span class="p">,</span> <span class="n">mean_and_quartiles</span><span class="p">[</span><span class="s2">&quot;Withdrawn&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/7e7a54e3dfab6d4e347d308a991620b464a68870b63eabd72692b4b463d1015b.png" src="../_images/7e7a54e3dfab6d4e347d308a991620b464a68870b63eabd72692b4b463d1015b.png" />
</div>
</div>
<p>We note that there is much more overlapping if considering the extremes.
This might explain why the splitting line was lower than expected previously, as it
tries to balance the tradeoff between passing students with a lower score and failing
students with a higher score.</p>
</section>
</section>
<section id="cumulative-number-of-clicks">
<h2>Cumulative number of clicks<a class="headerlink" href="#cumulative-number-of-clicks" title="Permalink to this heading">#</a></h2>
<p>We use the number of clicks in the VLE (Virtual Learning Environment) for the key
performance metric.</p>
<p>We follow the same steps as in the
<span class="xref myst">first example</span>.</p>
<section id="id10">
<h3>Step 1: Model the metric as a time series for each student<a class="headerlink" href="#id10" title="Permalink to this heading">#</a></h3>
<p>As in the work of Hlosta et al. we will use the <code class="docutils literal notranslate"><span class="pre">EEE/2014J</span></code> course.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>During merging, we loose 91 students that haven’t interacted with the VLE.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cumulative_click_count</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">oulad</span><span class="o">.</span><span class="n">student_registration</span><span class="p">[</span>
        <span class="p">(</span><span class="n">oulad</span><span class="o">.</span><span class="n">student_registration</span><span class="o">.</span><span class="n">code_module</span> <span class="o">==</span> <span class="s2">&quot;EEE&quot;</span><span class="p">)</span>
        <span class="o">&amp;</span> <span class="p">(</span><span class="n">oulad</span><span class="o">.</span><span class="n">student_registration</span><span class="o">.</span><span class="n">code_presentation</span> <span class="o">==</span> <span class="s2">&quot;2014J&quot;</span><span class="p">)</span>
    <span class="p">][[</span><span class="s2">&quot;id_student&quot;</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">merge</span><span class="p">(</span>
        <span class="n">oulad</span><span class="o">.</span><span class="n">student_vle</span><span class="p">[</span>
            <span class="p">(</span><span class="n">oulad</span><span class="o">.</span><span class="n">student_vle</span><span class="o">.</span><span class="n">code_module</span> <span class="o">==</span> <span class="s2">&quot;EEE&quot;</span><span class="p">)</span>
            <span class="o">&amp;</span> <span class="p">(</span><span class="n">oulad</span><span class="o">.</span><span class="n">student_vle</span><span class="o">.</span><span class="n">code_presentation</span> <span class="o">==</span> <span class="s2">&quot;2014J&quot;</span><span class="p">)</span>
        <span class="p">][[</span><span class="s2">&quot;id_student&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="s2">&quot;sum_click&quot;</span><span class="p">]],</span>
        <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">,</span>
        <span class="n">on</span><span class="o">=</span><span class="s2">&quot;id_student&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;id_student&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">)</span>
    <span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="n">oulad</span><span class="o">.</span><span class="n">student_info</span><span class="p">[</span>
            <span class="p">(</span><span class="n">oulad</span><span class="o">.</span><span class="n">student_info</span><span class="o">.</span><span class="n">code_module</span> <span class="o">==</span> <span class="s2">&quot;EEE&quot;</span><span class="p">)</span>
            <span class="o">&amp;</span> <span class="p">(</span><span class="n">oulad</span><span class="o">.</span><span class="n">student_info</span><span class="o">.</span><span class="n">code_presentation</span> <span class="o">==</span> <span class="s2">&quot;2014J&quot;</span><span class="p">)</span>
        <span class="p">][[</span><span class="s2">&quot;id_student&quot;</span><span class="p">,</span> <span class="s2">&quot;final_result&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;id_student&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;final_result&quot;</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="s2">&quot;sum_click&quot;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">cumulative_click_count</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>-18</th>
      <th>-17</th>
      <th>-16</th>
      <th>-15</th>
      <th>-14</th>
      <th>-13</th>
      <th>-12</th>
      <th>-11</th>
      <th>-10</th>
      <th>-9</th>
      <th>...</th>
      <th>260</th>
      <th>261</th>
      <th>262</th>
      <th>263</th>
      <th>264</th>
      <th>265</th>
      <th>266</th>
      <th>267</th>
      <th>268</th>
      <th>269</th>
    </tr>
    <tr>
      <th>id_student</th>
      <th>final_result</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>46048</th>
      <th>Withdrawn</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>12.0</td>
      <td>12.0</td>
      <td>12.0</td>
      <td>12.0</td>
      <td>12.0</td>
      <td>12.0</td>
      <td>12.0</td>
      <td>12.0</td>
      <td>12.0</td>
      <td>12.0</td>
    </tr>
    <tr>
      <th>47061</th>
      <th>Pass</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>347.0</td>
      <td>347.0</td>
      <td>347.0</td>
      <td>347.0</td>
      <td>347.0</td>
      <td>347.0</td>
      <td>347.0</td>
      <td>347.0</td>
      <td>347.0</td>
      <td>347.0</td>
    </tr>
    <tr>
      <th>60809</th>
      <th>Pass</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>2422.0</td>
      <td>2422.0</td>
      <td>2422.0</td>
      <td>2422.0</td>
      <td>2422.0</td>
      <td>2422.0</td>
      <td>2422.0</td>
      <td>2422.0</td>
      <td>2422.0</td>
      <td>2422.0</td>
    </tr>
    <tr>
      <th>62034</th>
      <th>Pass</th>
      <td>28.0</td>
      <td>28.0</td>
      <td>28.0</td>
      <td>28.0</td>
      <td>28.0</td>
      <td>28.0</td>
      <td>28.0</td>
      <td>28.0</td>
      <td>28.0</td>
      <td>28.0</td>
      <td>...</td>
      <td>1887.0</td>
      <td>1887.0</td>
      <td>1887.0</td>
      <td>1887.0</td>
      <td>1887.0</td>
      <td>1889.0</td>
      <td>1889.0</td>
      <td>1889.0</td>
      <td>1889.0</td>
      <td>1889.0</td>
    </tr>
    <tr>
      <th>67539</th>
      <th>Pass</th>
      <td>0.0</td>
      <td>19.0</td>
      <td>19.0</td>
      <td>26.0</td>
      <td>26.0</td>
      <td>26.0</td>
      <td>26.0</td>
      <td>26.0</td>
      <td>26.0</td>
      <td>26.0</td>
      <td>...</td>
      <td>1437.0</td>
      <td>1437.0</td>
      <td>1437.0</td>
      <td>1437.0</td>
      <td>1437.0</td>
      <td>1438.0</td>
      <td>1438.0</td>
      <td>1438.0</td>
      <td>1438.0</td>
      <td>1438.0</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2654928</th>
      <th>Pass</th>
      <td>29.0</td>
      <td>35.0</td>
      <td>46.0</td>
      <td>46.0</td>
      <td>46.0</td>
      <td>46.0</td>
      <td>46.0</td>
      <td>46.0</td>
      <td>46.0</td>
      <td>46.0</td>
      <td>...</td>
      <td>1784.0</td>
      <td>1784.0</td>
      <td>1784.0</td>
      <td>1784.0</td>
      <td>1784.0</td>
      <td>1784.0</td>
      <td>1785.0</td>
      <td>1785.0</td>
      <td>1785.0</td>
      <td>1785.0</td>
    </tr>
    <tr>
      <th>2663195</th>
      <th>Pass</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>1112.0</td>
      <td>1112.0</td>
      <td>1112.0</td>
      <td>1112.0</td>
      <td>1112.0</td>
      <td>1112.0</td>
      <td>1112.0</td>
      <td>1112.0</td>
      <td>1112.0</td>
      <td>1112.0</td>
    </tr>
    <tr>
      <th>2681277</th>
      <th>Withdrawn</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.0</td>
      <td>3.0</td>
      <td>3.0</td>
      <td>3.0</td>
      <td>3.0</td>
      <td>3.0</td>
      <td>...</td>
      <td>166.0</td>
      <td>166.0</td>
      <td>166.0</td>
      <td>166.0</td>
      <td>166.0</td>
      <td>166.0</td>
      <td>166.0</td>
      <td>166.0</td>
      <td>166.0</td>
      <td>166.0</td>
    </tr>
    <tr>
      <th>2686053</th>
      <th>Distinction</th>
      <td>7.0</td>
      <td>7.0</td>
      <td>12.0</td>
      <td>12.0</td>
      <td>17.0</td>
      <td>20.0</td>
      <td>20.0</td>
      <td>20.0</td>
      <td>20.0</td>
      <td>30.0</td>
      <td>...</td>
      <td>2332.0</td>
      <td>2332.0</td>
      <td>2334.0</td>
      <td>2334.0</td>
      <td>2335.0</td>
      <td>2335.0</td>
      <td>2336.0</td>
      <td>2336.0</td>
      <td>2336.0</td>
      <td>2336.0</td>
    </tr>
    <tr>
      <th>2686712</th>
      <th>Fail</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>34.0</td>
      <td>34.0</td>
      <td>34.0</td>
      <td>34.0</td>
      <td>34.0</td>
      <td>34.0</td>
      <td>...</td>
      <td>1205.0</td>
      <td>1205.0</td>
      <td>1205.0</td>
      <td>1205.0</td>
      <td>1205.0</td>
      <td>1205.0</td>
      <td>1205.0</td>
      <td>1205.0</td>
      <td>1205.0</td>
      <td>1205.0</td>
    </tr>
  </tbody>
</table>
<p>1097 rows × 288 columns</p>
</div></div></div>
</div>
</section>
<section id="id11">
<h3>Step 2: Perform statistical tests<a class="headerlink" href="#id11" title="Permalink to this heading">#</a></h3>
<p>As in the first example, let’s first check whether we can use the Unpaired t-test.</p>
<section id="id12">
<h4>Unpaired t-test<a class="headerlink" href="#id12" title="Permalink to this heading">#</a></h4>
<section id="id13">
<h5>Assumptions<a class="headerlink" href="#id13" title="Permalink to this heading">#</a></h5>
<section id="id14">
<h6><strong>Detecting extreme outliers statistically</strong><a class="headerlink" href="#id14" title="Permalink to this heading">#</a></h6>
<p>Let’s verify whether there are any extreme outliers (above <code class="docutils literal notranslate"><span class="pre">Q3</span> <span class="pre">+</span> <span class="pre">3xIQR</span></code> or below
<code class="docutils literal notranslate"><span class="pre">Q1</span> <span class="pre">-</span> <span class="pre">3xIQR</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">extremes</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">cumulative_click_count</span><span class="o">.</span><span class="n">quantile</span><span class="p">([</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">])</span>
    <span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">IQR</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mf">0.75</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="mf">0.25</span><span class="p">])</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span>
        <span class="n">lower_extreme</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mf">0.25</span><span class="p">]</span> <span class="o">-</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;IQR&quot;</span><span class="p">],</span>
        <span class="n">upper_extreme</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mf">0.75</span><span class="p">]</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;IQR&quot;</span><span class="p">],</span>
    <span class="p">)[[</span><span class="s2">&quot;lower_extreme&quot;</span><span class="p">,</span> <span class="s2">&quot;upper_extreme&quot;</span><span class="p">]]</span>
<span class="p">)</span>

<span class="n">bigger</span> <span class="o">=</span> <span class="n">cumulative_click_count</span> <span class="o">&gt;</span> <span class="n">extremes</span><span class="o">.</span><span class="n">upper_extreme</span>
<span class="n">smaller</span> <span class="o">=</span> <span class="n">cumulative_click_count</span> <span class="o">&lt;</span> <span class="n">extremes</span><span class="o">.</span><span class="n">lower_extreme</span>
<span class="n">total</span> <span class="o">=</span> <span class="n">bigger</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">+</span> <span class="n">smaller</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;The number of extreme outliers (N=</span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s2">) represents &quot;</span>
    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="mi">100</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">cumulative_click_count</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="sa">f</span><span class="s2">&quot;% of the dataset (N=</span><span class="si">{</span><span class="n">cumulative_click_count</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="si">}</span><span class="s2">)&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The number of extreme outliers (N=4330) represents 1.37% of the dataset (N=315936)
</pre></div>
</div>
</div>
</div>
<p>We note that the outliers ratio is more significant than in the previous example.
However, as the number of samples is much more prominent in this case, we also suppose
that the impact on the t-test will be limited.</p>
</section>
<section id="examine-normality">
<h6><strong>Examine normality</strong><a class="headerlink" href="#examine-normality" title="Permalink to this heading">#</a></h6>
<p>We skip this step as the number of samples is high, and the central limit theorem
applies.</p>
<p>Thus, we assume here too that the normality requirement is satisfied.</p>
</section>
<section id="id15">
<h6><strong>Verifying equal variances with the Levene test</strong><a class="headerlink" href="#id15" title="Permalink to this heading">#</a></h6>
<p>Finally, let’s test the homogeneity of variance using the Levene test.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cumulative_click_count</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">levene</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">row</span><span class="p">)]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">values</span><span class="p">])</span><span class="o">.</span><span class="n">pvalue</span>
    <span class="o">&lt;=</span> <span class="mf">0.05</span>
<span class="p">)</span><span class="o">.</span><span class="n">rename_axis</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;H0 rejected&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>index</th>
      <th>H0 rejected</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>True</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>True</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>True</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>283</th>
      <td>283</td>
      <td>True</td>
    </tr>
    <tr>
      <th>284</th>
      <td>284</td>
      <td>True</td>
    </tr>
    <tr>
      <th>285</th>
      <td>285</td>
      <td>True</td>
    </tr>
    <tr>
      <th>286</th>
      <td>286</td>
      <td>True</td>
    </tr>
    <tr>
      <th>287</th>
      <td>287</td>
      <td>True</td>
    </tr>
  </tbody>
</table>
<p>288 rows × 2 columns</p>
</div></div></div>
</div>
<p>The Levene test indicates that there is evidence that the variances are <strong>different</strong>.</p>
</section>
<section id="id16">
<h6><strong>Conclusion</strong><a class="headerlink" href="#id16" title="Permalink to this heading">#</a></h6>
<p>As in the first example, we conclude that assumptions for an Unpaired t-test are not
satisfied as the variances are different.</p>
<p>Therefore, we skip to the next test.</p>
</section>
</section>
</section>
<section id="id17">
<h4>Wilcoxon rank-sum test<a class="headerlink" href="#id17" title="Permalink to this heading">#</a></h4>
<section id="id18">
<h5>Assumptions<a class="headerlink" href="#id18" title="Permalink to this heading">#</a></h5>
<p>The dataset satisfies the Wilcoxon rank-sum test assumptions. We skip to the next
step.</p>
</section>
<section id="id19">
<h5>Applying the test<a class="headerlink" href="#id19" title="Permalink to this heading">#</a></h5>
<p>We apply the Wilcoxon rank-sum test for each combination of <code class="docutils literal notranslate"><span class="pre">final_result</span></code> (e.g.,
Pass-Fail, Pass-Withdrawn, etc.) and for each time-slice (<code class="docutils literal notranslate"><span class="pre">date</span></code>) (-18, -17, etc.)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">unstacked_cumulative_click_count</span> <span class="o">=</span> <span class="n">cumulative_click_count</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span>
<span class="n">significance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span>
    <span class="p">(</span>
        <span class="n">cumulative_click_count</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">levels</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">unstacked_cumulative_click_count</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="p">),</span>
    <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">offset</span><span class="p">,</span> <span class="n">date</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cumulative_click_count</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">unstacked_cumulative_click_count</span><span class="p">[</span><span class="n">date</span><span class="p">]</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
    <span class="n">offset</span> <span class="o">*=</span> <span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">combinations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">)),</span> <span class="n">r</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">significance</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="n">offset</span><span class="p">]</span> <span class="o">=</span> <span class="n">significance</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">offset</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ranksums</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">i</span><span class="p">],</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">j</span><span class="p">],</span> <span class="n">nan_policy</span><span class="o">=</span><span class="s2">&quot;omit&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pvalue</span> <span class="o">&lt;=</span> <span class="mf">0.05</span>
        <span class="p">)</span>

<span class="n">significance_df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
        <span class="n">significance</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="n">unstacked_cumulative_click_count</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">levels</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">columns</span><span class="o">=</span><span class="n">unstacked_cumulative_click_count</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">rename_axis</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">rename_axis</span><span class="p">([</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;H0 rejected&quot;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">significance_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="4" halign="left">-18</th>
      <th colspan="4" halign="left">-17</th>
      <th colspan="2" halign="left">-16</th>
      <th>...</th>
      <th colspan="2" halign="left">267</th>
      <th colspan="4" halign="left">268</th>
      <th colspan="4" halign="left">269</th>
    </tr>
    <tr>
      <th>H0 rejected</th>
      <th>Distinction</th>
      <th>Fail</th>
      <th>Pass</th>
      <th>Withdrawn</th>
      <th>Distinction</th>
      <th>Fail</th>
      <th>Pass</th>
      <th>Withdrawn</th>
      <th>Distinction</th>
      <th>Fail</th>
      <th>...</th>
      <th>Pass</th>
      <th>Withdrawn</th>
      <th>Distinction</th>
      <th>Fail</th>
      <th>Pass</th>
      <th>Withdrawn</th>
      <th>Distinction</th>
      <th>Fail</th>
      <th>Pass</th>
      <th>Withdrawn</th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Distinction</th>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>...</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
    </tr>
    <tr>
      <th>Fail</th>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>False</td>
      <td>...</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
    </tr>
    <tr>
      <th>Pass</th>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>...</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
    </tr>
    <tr>
      <th>Withdrawn</th>
      <td>True</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>False</td>
      <td>...</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
<p>4 rows × 1152 columns</p>
</div></div></div>
</div>
<p>The hypothesis test indicates a significant difference in the variance between the
groups in the time slices, starting from the first time slice (from the day -18).</p>
</section>
</section>
</section>
<section id="id20">
<h3>Step 3: Compute the splitting value<a class="headerlink" href="#id20" title="Permalink to this heading">#</a></h3>
<p>As in the first example, in this step, we try to compute the splitting value in each
time slice that minimizes the split error between <strong>Pass</strong>ing students and <strong>Fail</strong>ing
students (counting “Distinction” also as “Passing” and “Withdrawn” as “Failing”)</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>We are still working on this part! Our current implementation follows a
<strong>naive</strong> approach!</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">splitting_values</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">date</span> <span class="ow">in</span> <span class="n">cumulative_click_count</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">cumulative_click_count</span><span class="p">[</span><span class="n">date</span><span class="p">]</span>
    <span class="n">index</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
    <span class="n">index</span><span class="p">[</span><span class="n">index</span> <span class="o">==</span> <span class="s2">&quot;Distinction&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Pass&quot;</span>
    <span class="n">index</span><span class="p">[</span><span class="n">index</span> <span class="o">==</span> <span class="s2">&quot;Withdrawn&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Fail&quot;</span>

    <span class="n">unique_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
    <span class="n">max_score</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># pylint: disable=invalid-name</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">previous_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">NaN</span>
    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">unique_values</span><span class="p">:</span>
        <span class="c1"># Larger interval ==&gt; more speed but less precision</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">-</span> <span class="n">previous_value</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">previous_value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="n">separator</span> <span class="o">=</span> <span class="n">df</span> <span class="o">&lt;</span> <span class="n">value</span>
        <span class="c1"># We suppose Fail score &lt; Pass score</span>
        <span class="n">score</span> <span class="o">=</span> <span class="p">(</span><span class="n">index</span><span class="p">[</span><span class="n">separator</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Fail&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="n">index</span><span class="p">[</span><span class="o">~</span><span class="n">separator</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Pass&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">score</span> <span class="o">&gt;</span> <span class="n">max_score</span><span class="p">:</span>
            <span class="n">max_score</span> <span class="o">=</span> <span class="n">score</span>
            <span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">max_score</span> <span class="o">/</span> <span class="n">cumulative_click_count</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">2</span><span class="p">),</span>
                <span class="s2">&quot;separator&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">,</span>
            <span class="p">}</span>

    <span class="n">splitting_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

<span class="n">splitting_values</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">splitting_values</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">cumulative_click_count</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">splitting_values</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>score</th>
      <th>separator</th>
    </tr>
    <tr>
      <th>date</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>-18</th>
      <td>0.62</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>-17</th>
      <td>0.62</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>-16</th>
      <td>0.62</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>-15</th>
      <td>0.62</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>-14</th>
      <td>0.62</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>265</th>
      <td>0.87</td>
      <td>712.0</td>
    </tr>
    <tr>
      <th>266</th>
      <td>0.87</td>
      <td>712.0</td>
    </tr>
    <tr>
      <th>267</th>
      <td>0.87</td>
      <td>712.0</td>
    </tr>
    <tr>
      <th>268</th>
      <td>0.87</td>
      <td>712.0</td>
    </tr>
    <tr>
      <th>269</th>
      <td>0.87</td>
      <td>712.0</td>
    </tr>
  </tbody>
</table>
<p>288 rows × 2 columns</p>
</div></div></div>
</div>
</section>
<section id="id21">
<h3>Step 4: Plot the time-series graph<a class="headerlink" href="#id21" title="Permalink to this heading">#</a></h3>
<p>Finally, let’s plot the results.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">splitting_values</span><span class="p">[</span><span class="s2">&quot;separator&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
    <span class="n">linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Cumulative click count by student final_result&quot;</span><span class="p">,</span>
    <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Day&quot;</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Cumulative click count&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">mean_and_quartiles</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">cumulative_click_count</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;final_result&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">(</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;first_quartile&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">25</span><span class="p">)),</span>
            <span class="p">(</span><span class="s2">&quot;third_quartile&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">75</span><span class="p">)),</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">reorder_levels</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="o">.</span><span class="n">unstack</span><span class="p">()</span>
<span class="p">)</span>

<span class="n">fill_between_plot</span><span class="p">(</span><span class="s2">&quot;Distinction&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="n">mean_and_quartiles</span><span class="p">[</span><span class="s2">&quot;Distinction&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="n">fill_between_plot</span><span class="p">(</span><span class="s2">&quot;Pass&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="n">mean_and_quartiles</span><span class="p">[</span><span class="s2">&quot;Pass&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="n">fill_between_plot</span><span class="p">(</span><span class="s2">&quot;Fail&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">mean_and_quartiles</span><span class="p">[</span><span class="s2">&quot;Fail&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="n">fill_between_plot</span><span class="p">(</span><span class="s2">&quot;Withdrawn&quot;</span><span class="p">,</span> <span class="s2">&quot;orange&quot;</span><span class="p">,</span> <span class="n">mean_and_quartiles</span><span class="p">[</span><span class="s2">&quot;Withdrawn&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/5d28454bca863ef1d1f6d8e342b138c6042bed002d7da73e65d55b8fb5c2458e.png" src="../_images/5d28454bca863ef1d1f6d8e342b138c6042bed002d7da73e65d55b8fb5c2458e.png" />
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="first_descriptive_analysis.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">A first descriptive analysis</p>
      </div>
    </a>
    <a class="right-next"
       href="predicting_students_final_exam_outcome.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Predicting student’s final exam outcome</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cumulative-weighted-assessments-scores">Cumulative weighted assessments scores</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-model-the-metric-as-a-time-series-for-each-student">Step 1: Model the metric as a time series for each student</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-perform-statistical-tests">Step 2: Perform statistical tests</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#unpaired-t-test">Unpaired t-test</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#assumptions">Assumptions</a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#detecting-outliers-visually"><strong>Detecting outliers visually</strong></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#detecting-extreme-outliers-statistically"><strong>Detecting extreme outliers statistically</strong></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#examine-normality-visually"><strong>Examine normality visually</strong></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#examine-normality-with-the-shapiro-wilk-test"><strong>Examine normality with the Shapiro-Wilk test</strong></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#verifying-equal-variances-with-the-levene-test"><strong>Verifying equal variances with the Levene test</strong></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion"><strong>Conclusion</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wilcoxon-rank-sum-test">Wilcoxon rank-sum test</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Assumptions</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#applying-the-test">Applying the test</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-compute-the-splitting-value">Step 3: Compute the splitting value</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-4-plot-the-time-series-graph">Step 4: Plot the time-series graph</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cumulative-number-of-clicks">Cumulative number of clicks</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">Step 1: Model the metric as a time series for each student</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">Step 2: Perform statistical tests</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">Unpaired t-test</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">Assumptions</a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#id14"><strong>Detecting extreme outliers statistically</strong></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#examine-normality"><strong>Examine normality</strong></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#id15"><strong>Verifying equal variances with the Levene test</strong></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#id16"><strong>Conclusion</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">Wilcoxon rank-sum test</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">Assumptions</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">Applying the test</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">Step 3: Compute the splitting value</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">Step 4: Plot the time-series graph</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By SergioSim
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>